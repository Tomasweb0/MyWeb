<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>TomasWeb ‚Äì Auto hra</title>
<style>
body {
    margin: 0;
    font-family: Arial;
    background: #222;
    color: white;
    text-align: center;
}
nav {
    background: linear-gradient(90deg, red, orange);
    padding: 15px;
    display: flex;
    justify-content: space-between;
}
button {
    padding: 10px;
    background: red;
    color: white;
    border: none;
    cursor: pointer;
    margin-top: 10px;
}
canvas {
    background: #555;
    display: none;
    margin: 20px auto;
    border: 4px solid white;
}
#shop, #cart {
    margin: 20px;
}
</style>
</head>
<body>

<nav>
<h2>TomasWeb</h2>
<div>
<span onclick="showShop()" style="cursor:pointer">Auta</span>
<span onclick="showCart()" style="cursor:pointer;margin-left:15px">
Ko≈°√≠k üõí (<span id="count">0</span>)
</span>
</div>
</nav>

<div id="shop">
<h1>Kup auto</h1>
<button onclick="addToCart('BMW')">BMW</button>
<button onclick="addToCart('Audi')">Audi</button>
</div>

<div id="cart" style="display:none">
<h2>Ko≈°√≠k</h2>
<p id="cartText">Pr√°zdn√Ω</p>
<button onclick="buy()">Koupit a ≈ô√≠dit üöó</button>
</div>

<canvas id="game" width="400" height="600"></canvas>

<script>
let cart = [];
let canvas = document.getElementById("game");
let ctx = canvas.getContext("2d");

let car = { x: 180, y: 480, w: 40, h: 70, speed: 5 };
let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function addToCart(name){
    cart = [name];
    document.getElementById("count").innerText = 1;
    alert(name + " p≈ôid√°no!");
}

function showCart(){
    shop.style.display = "none";
    cartDiv.style.display = "block";
    document.getElementById("cartText").innerText = "Auto: " + cart[0];
}

function showShop(){
    shop.style.display = "block";
    cartDiv.style.display = "none";
}

let shop = document.getElementById("shop");
let cartDiv = document.getElementById("cart");

function buy(){
    if(cart.length === 0){ alert("Nem√°≈° auto!"); return; }
    shop.style.display = "none";
    cartDiv.style.display = "none";
    canvas.style.display = "block";
    requestAnimationFrame(gameLoop);
}

function gameLoop(){
    ctx.clearRect(0,0,400,600);

    // silnice
    ctx.fillStyle = "#333";
    ctx.fillRect(100,0,200,600);

    // auto
    ctx.fillStyle = "red";
    ctx.fillRect(car.x, car.y, car.w, car.h);

    // ovl√°d√°n√≠
    if(keys["ArrowLeft"] || keys["a"]) car.x -= car.speed;
    if(keys["ArrowRight"] || keys["d"]) car.x += car.speed;
    if(keys["ArrowUp"] || keys["w"]) car.y -= car.speed;
    if(keys["ArrowDown"] || keys["s"]) car.y += car.speed;

    // hranice
    car.x = Math.max(100, Math.min(260, car.x));
    car.y = Math.max(0, Math.min(530, car.y));

    requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
